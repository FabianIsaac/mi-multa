(this["webpackJsonpmi-multa"]=this["webpackJsonpmi-multa"]||[]).push([[0],{11:function(e,t,r){},14:function(e,t,r){"use strict";r.r(t);var a=r(1),s=r.n(a),n=r(6),o=r.n(n),c=(r(11),r(3)),l=r.n(c),i=r(4),d=r(2),u={server:"http://localhost:8000"},b=r(0),x=s.a.forwardRef,m=s.a.useImperativeHandle,g=x((function(e,t){var r=Object(a.useState)(!1),s=Object(d.a)(r,2),n=s[0],o=s[1],c=Object(a.useState)(""),l=Object(d.a)(c,2),i=l[0],u=l[1];return m(t,(function(){return{mostarAlert:function(e){o(!0),u(e),setTimeout((function(){o(!1)}),5e3)}}})),Object(b.jsxs)("div",{role:"alert",className:n?"fixed z-40 xl:w-2/12 mx-auto sm:mx-0 sm:w-2/3 md:w-3/5 justify-between w-11/12 bg-gray-300 shadow-lg rounded flex sm:flex-row flex-col left-0 sm:left-auto dark:bg-gray-800 right-0 sm:top-0 sm:mr-6 mt-16 sm:mt-6 mb-6 sm:mb-0 transition duration-150 ease-in-out translate-show":"translate-hide",children:[Object(b.jsx)("div",{className:"flex flex-col justify-center px-4 sm:px-2 xl:pl-4 pt-4 sm:pb-4 ml-2",children:Object(b.jsx)("p",{className:"text-sm dark:text-gray-400 font-bold",children:i})}),Object(b.jsx)("style",{children:"\n                .translate-show{\n                    transform : translateX(0%);\n                }\n                .translate-hide{\n                    transform : translateX(150%);\n                }\n                "})," "]})})),j=s.a.forwardRef,p=s.a.useImperativeHandle,h=j((function(e,t){var r=Object(a.useRef)(),s=Object(a.useState)(!1),n=Object(d.a)(s,2),o=n[0],c=n[1],x=Object(a.useState)(),m=Object(d.a)(x,2),j=m[0],h=m[1],f=Object(a.useState)(),y=Object(d.a)(f,2),O=y[0],v=y[1],w=Object(a.useState)(""),N=Object(d.a)(w,2),k=N[0],S=N[1];p(t,(function(){return{openModal:function(e){c(!0),h(e),v(0===e.registro_de_multas_impagas?"":"bg-red-600 px-2 py-1 my-2 text-white rounded-md")}}}));var _=function(){var t=Object(i.a)(l.a.mark((function t(){var a,s,n,o,c,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(u.server,"/multas/").concat(j.patente,"/pagar"),t.next=3,fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({valor:k})});case 3:if(!(s=t.sent).ok){t.next=16;break}return t.next=7,s.json();case 7:n=t.sent,o=n.data,h(o),S(""),v(0===o.registro_de_multas_impagas?"":"bg-red-600 px-2 py-1 my-2 text-white rounded-md"),e.recargarTabla(),r.current.mostarAlert("Pago realizado correctamente"),t.next=21;break;case 16:return t.next=18,s.json();case 18:c=t.sent,i=c.errorMessage,r.current.mostarAlert(i.valor?i.valor:i);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(i.a)(l.a.mark((function t(){var a,s,n,o,c,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(u.server,"/multas/").concat(j.patente,"/cursar"),t.next=3,fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({valor:k})});case 3:if(!(s=t.sent).ok){t.next=16;break}return t.next=7,s.json();case 7:n=t.sent,o=n.data,h(o),S(""),v(0===o.registro_de_multas_impagas?"":"bg-red-600 px-2 py-1 my-2 text-white rounded-md"),e.recargarTabla(),r.current.mostarAlert("Multa cursada correctamente"),t.next=21;break;case 16:return t.next=18,s.json();case 18:c=t.sent,i=c.errorMessage,r.current.mostarAlert(i.valor?i.valor:i);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{ref:r}),o&&Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"py-12 bg-gray-700 opacity-20 transition duration-150 ease-in-out z-10 fixed top-0 right-0 bottom-0 left-0 overflow-hidden"}),Object(b.jsx)("div",{className:"py-12 transition duration-150 ease-in-out z-10 fixed top-0 right-0 bottom-0 left-0 overflow-hidden",id:"modal",children:Object(b.jsx)("div",{role:"alert",className:"container mx-auto w-11/12 md:w-7/12 max-w-lg",children:Object(b.jsxs)("div",{className:"relative py-8 px-5 md:px-10 bg-white shadow-md rounded border border-gray-400",children:[Object(b.jsx)("div",{className:"w-full flex items-center text-green-400 mb-3",children:Object(b.jsxs)("h1",{className:"text-gray-800 font-lg font-bold tracking-normal leading-tight uppercase",children:["Datos multa patente: ",j.patente]})}),Object(b.jsx)("div",{className:"flex items-center",style:{fontFamily:'"Lato", sans-serif'},children:Object(b.jsxs)("div",{className:"flex flex-col py-8 px-4",children:[Object(b.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(b.jsx)("span",{className:"text-gray-800 dark:text-gray-100 text-sm font-extrabold leading-tight tracking-normal mb-2",children:j.vehiculo}),Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-2",children:["Valor permiso: $",j.valor_permiso]}),Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-2",children:["Intereses y reajustes: $",j.interes_y_reajuste]}),Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-2",children:["Multas impagas: ",Object(b.jsxs)("span",{className:O,children:["$",j.registro_de_multas_impagas]})]})]}),Object(b.jsx)("div",{className:"flex flex-col mb-2",children:Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm font-bold leading-tight tracking-normal mb-2",children:["Total a pagar: $",j.subtotal]})}),Object(b.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(b.jsxs)("label",{htmlFor:"valor",className:"text-gray-800 dark:text-gray-100 text-sm font-bold leading-tight tracking-normal mb-2",children:["Valor",Object(b.jsx)("span",{className:"ml-2 p-1 rounded-full hover:text-white bg-blue-100 hover:bg-blue-500",title:"Ingrese un monto y luego haga click en el bot\xf3n pagar o multar. Puede pagar el total de la deuda o solo una fracci\xf3n, en caso de pagar parte, se descontara primero el inter\xe9s y reajuste luego se descontara lamulta y al final se descontara el permiso",children:"?"})]}),Object(b.jsx)("input",{id:"valor",type:"text",value:k,onChange:function(e){S(e.target.value)},className:"text-gray-600 dark:text-gray-400 focus:outline-none focus:border focus:border-blue-700 dark:focus:border-blue-700 dark:border-gray-700 dark:bg-gray-800 bg-white font-normal w-64 h-10 flex items-center pl-3 text-sm border-gray-300 rounded border shadow",placeholder:"Ingrese el monto"})]})]})}),Object(b.jsxs)("div",{className:"flex items-center w-full",children:[Object(b.jsx)("button",{onClick:_,className:"focus:outline-none transition duration-150 ease-in-out hover:bg-blue-600 bg-blue-700 rounded text-white px-8 py-2 text-xs sm:text-sm",children:"Pagar"}),Object(b.jsx)("button",{onClick:C,className:"focus:outline-none ml-3 transition duration-150 ease-in-out hover:bg-red-600 bg-red-700 rounded text-white px-8 py-2 text-xs sm:text-sm",children:"Multar"}),Object(b.jsx)("button",{className:"focus:outline-none ml-3 bg-gray-100 transition duration-150 text-gray-600 ease-in-out hover:border-gray-400 hover:bg-gray-300 border rounded px-4 sm:px-8 py-2 text-xs sm:text-sm",onClick:function(){c(!1)},children:"Cancelar"})]})]})})})]})]})})),f=s.a.forwardRef,y=s.a.useImperativeHandle,O=f((function(e,t){var r=Object(a.useRef)(),s=Object(a.useState)(!1),n=Object(d.a)(s,2),o=n[0],c=n[1],x=Object(a.useState)(),m=Object(d.a)(x,2),j=m[0],p=m[1],h=Object(a.useState)(0),f=Object(d.a)(h,2),O=f[0],v=f[1],w=Object(a.useState)(""),N=Object(d.a)(w,2),k=N[0],S=N[1],_=Object(a.useState)(0),C=Object(d.a)(_,2),T=C[0],A=C[1],I=Object(a.useState)(0),E=Object(d.a)(I,2),M=E[0],R=E[1],P=Object(a.useState)(0),$=Object(d.a)(P,2),z=$[0],F=$[1],H=Object(a.useState)(0),J=Object(d.a)(H,2),L=J[0],V=J[1];y(t,(function(){return{openModal:function(){c(!0)}}})),Object(a.useEffect)((function(){U()}),[]);var B=function(){V(T+z+M)},U=function(){var e=Object(i.a)(l.a.mark((function e(){var t,a,s,n,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(u.server,"/modelos"),e.next=3,fetch(t);case 3:if(!(a=e.sent).ok){e.next=12;break}return e.next=7,a.json();case 7:s=e.sent,n=s.data,p(n),e.next=17;break;case 12:return e.next=14,a.json();case 14:o=e.sent,c=o.errorMessage,r.current.mostarAlert(c.valor?c.valor:c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var t=Object(i.a)(l.a.mark((function t(){var a,s,n,o,c,i,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=O&&"--"!=O){t.next=3;break}return r.current.mostarAlert("Seleccione un modelo"),t.abrupt("return");case 3:return a=j.find((function(e){return e.id==O})),s="".concat(u.server,"/multas"),t.next=7,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patente:k,vehiculo:a.id,interes_y_reajuste:M,registro_de_multas_impagas:z,subtotal:L})});case 7:if(!(n=t.sent).ok){t.next=14;break}r.current.mostarAlert("Registro creado correctamente"),e.recargarTabla(),G(),t.next=21;break;case 14:return t.next=16,n.json();case 16:for(d in o=t.sent,c=o.errorMessage,i="",c)i=c[d];r.current.mostarAlert(i);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){v(0),S(""),A(0),R(0),F(0),V(0)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{ref:r}),o&&Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"py-12 bg-gray-700 opacity-20 transition duration-150 ease-in-out z-10 fixed top-0 right-0 bottom-0 left-0 overflow-hidden"}),Object(b.jsx)("div",{className:"py-12 transition duration-150 ease-in-out z-10 fixed top-0 right-0 bottom-0 left-0 overflow-hidden",id:"modal",children:Object(b.jsx)("div",{role:"alert",className:"container mx-auto w-11/12 md:w-7/12 max-w-lg",children:Object(b.jsxs)("div",{className:"relative py-8 px-5 md:px-10 bg-white shadow-md rounded border border-gray-400",children:[Object(b.jsx)("div",{className:"w-full flex items-center text-green-400 mb-3",children:Object(b.jsx)("h1",{className:"text-gray-800 font-lg font-bold tracking-normal leading-tight uppercase",children:"Crear nuevo registro de multa"})}),Object(b.jsx)("div",{className:"flex items-center",style:{fontFamily:'"Lato", sans-serif'},children:Object(b.jsxs)("div",{className:"flex flex-col py-8 px-4",children:[Object(b.jsxs)("div",{className:"flex flex-col mb-2",children:[Object(b.jsxs)("select",{value:O,onChange:function(e){if(v(e.target.value),"--"!=e.target.value){var t=j.find((function(t){return t.id==e.target.value}));A(t.valor_permiso),V(t.valor_permiso+z+M)}else A(0),V(0+z+M)},children:[Object(b.jsx)("option",{value:"--",children:"Seleccione el modelo"}),j.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.vehiculo},e.id)}))]}),Object(b.jsx)("span",{className:"text-gray-800 dark:text-gray-100 text-sm font-extrabold leading-tight tracking-normal mb-"}),Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-3 mt-3",children:["Valor permiso: $",T]}),Object(b.jsx)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-1",children:"Patente: "}),Object(b.jsx)("input",{value:k,onChange:function(e){S(e.target.value)},type:"text",className:"text-gray-600 dark:text-gray-400 focus:outline-none focus:border focus:border-blue-700 dark:focus:border-blue-700 dark:border-gray-700 dark:bg-gray-800 bg-white font-normal w-64 h-10 flex items-center pl-3 text-sm border-gray-300 rounded border shadow",placeholder:"Ej.: xxxx00"}),Object(b.jsx)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-1 mt-3",children:"Intereses y reajustes: "}),Object(b.jsx)("input",{value:M,onBlur:B,onChange:function(e){isNaN(parseInt(e.target.value))?0==e.target.value.length&&R(0):R(parseInt(e.target.value))},type:"text",className:"text-gray-600 dark:text-gray-400 focus:outline-none focus:border focus:border-blue-700 dark:focus:border-blue-700 dark:border-gray-700 dark:bg-gray-800 bg-white font-normal w-64 h-10 flex items-center pl-3 text-sm border-gray-300 rounded border shadow",placeholder:"Ingrese el monto"}),Object(b.jsx)("span",{className:"text-gray-800 dark:text-gray-100 text-sm leading-tight tracking-normal mb-1 mt-3",children:"Multas impagas:"}),Object(b.jsx)("input",{value:z,onBlur:B,onChange:function(e){isNaN(parseInt(e.target.value))?0==e.target.value.length&&F(0):F(parseInt(e.target.value))},type:"text",className:"text-gray-600 dark:text-gray-400 focus:outline-none focus:border focus:border-blue-700 dark:focus:border-blue-700 dark:border-gray-700 dark:bg-gray-800 bg-white font-normal w-64 h-10 flex items-center pl-3 text-sm border-gray-300 rounded border shadow",placeholder:"Ingrese el monto"})]}),Object(b.jsx)("div",{className:"flex flex-col mt-2",children:Object(b.jsxs)("span",{className:"text-gray-800 dark:text-gray-100 text-sm font-bold leading-tight tracking-normal mb-2",children:["Subtotal: $",L]})})]})}),Object(b.jsxs)("div",{className:"flex items-center w-full",children:[Object(b.jsx)("button",{onClick:D,className:"focus:outline-none transition duration-150 ease-in-out hover:bg-blue-600 bg-blue-700 rounded text-white px-8 py-2 text-xs sm:text-sm",children:"Crear registro"}),Object(b.jsx)("button",{className:"focus:outline-none ml-3 bg-gray-100 transition duration-150 text-gray-600 ease-in-out hover:border-gray-400 hover:bg-gray-300 border rounded px-4 sm:px-8 py-2 text-xs sm:text-sm",onClick:function(){c(!1),G()},children:"Cancelar"})]})]})})})]})]})})),v=function(){var e=Object(a.useRef)({recargar:function(){x(),console.log("deberia cargar")}}),t=Object(a.useRef)(e),r=Object(a.useRef)(e),s=Object(a.useState)(),n=Object(d.a)(s,2),o=n[0],c=n[1];Object(a.useEffect)((function(){x()}),[h]);var x=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(u.server,"/multas/"),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,s=a.data,c(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{recargarTabla:x,ref:t}),Object(b.jsx)(O,{recargarTabla:x,ref:r}),o&&Object(b.jsx)("div",{className:"container mx-auto sm:px-8 max-w-6xl",children:Object(b.jsx)("div",{className:"py-8",children:Object(b.jsx)("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4",children:Object(b.jsx)("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:Object(b.jsxs)("table",{className:"min-w-full leading-normal shadow-md border-gray-500 max-h-1.5 animate-fadeIn",children:[Object(b.jsx)("thead",{className:"bg-gray-500 text-white",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"PATENTE"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"VEH\xcdCULO"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"VALOR PERMISO"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"INTERESES Y REAJUSTES"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"REGISTRO DE MULTAS IMPAGAS"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:"SUBTOTAL"}),Object(b.jsx)("th",{scope:"col",className:"px-5 py-3 w-auto border-b border-gray-200 text-sm whitespace-no-wrap uppercase text-center font-normal",children:Object(b.jsx)("button",{onClick:function(){r.current.openModal()},className:"py-1 px-4 text-gray-600 hover:text-gray-100  bg-gray-100 hover:bg-gray-600  focus:ring-gray-500 focus:ring-offset-gray-200 w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",children:"Nuevo"})})]})}),Object(b.jsx)("tbody",{className:"h-3/5",children:o.map((function(e){var r=0===e.registro_de_multas_impagas?"":"bg-red-600 px-2 py-1 my-2 text-white rounded-md";return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm",children:Object(b.jsx)("p",{className:"text-gray-900 whitespace-no-wrap font-bold",children:e.patente})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm",children:Object(b.jsx)("p",{className:"text-gray-900 whitespace-no-wrap text-xs",children:e.vehiculo})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm text-right",children:Object(b.jsxs)("p",{className:"text-gray-900 whitespace-no-wrap",children:["$",e.valor_permiso]})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm text-right",children:Object(b.jsxs)("p",{className:"text-gray-900 whitespace-no-wrap",children:["$",e.interes_y_reajuste]})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm text-right",children:Object(b.jsx)("p",{className:"text-gray-900",children:Object(b.jsxs)("span",{className:r,children:["$",e.registro_de_multas_impagas]})})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm text-right",children:Object(b.jsxs)("p",{className:"text-gray-900 whitespace-no-wrap font-bold",children:["$",e.subtotal]})}),Object(b.jsx)("td",{className:"px-5 py-2 border-b w-auto border-gray-200 bg-gray-50 text-sm text-right",children:Object(b.jsx)("button",{onClick:function(){t.current.openModal(e)},className:"py-1 px-4 bg-gray-500 hover:bg-gray-600 focus:ring-gray-500 focus:ring-offset-gray-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",children:"Acciones"})})]},e.id)}))})]})})})})})]})},w=function(e){var t=e.children;return Object(b.jsx)("div",{children:t})};o.a.render(Object(b.jsx)(w,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.32785124.chunk.js.map